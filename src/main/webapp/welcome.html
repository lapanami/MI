<#include "/common/header.html">
Hi ${user.firstName + ' ' + user.lastName}<br />
Welcome to Home Credit.
This is our user list: 
<script src="static/js/jquery.dataTables.min.js"></script>
<script src="static/js/dataTables.bootstrap.min.js"></script>
<link href="static/css/dataTables.bootstrap.min.css" rel="stylesheet">
<link href="static/css/common/welcome.css" rel="stylesheet">
<table width="100%" class="display" id="userList" cellspacing="0">
	<thead>
		<tr>
			<th>First Name</th>
			<th>Last Name</th>
			<th>User Name</th>
			<th>Email</th>
			<th>Created By</th>
			<th>Created Date</th>
		</tr>
	</thead>
	<tfoot>
		<tr>
			<th>First Name</th>
			<th>Last Name</th>
			<th>User Name</th>
			<th>Email</th>
			<th>Created By</th>
			<th>Created Date</th>
		</tr>
	</tfoot>
	<tbody>
		<#list listUser as user>
		<tr data-uid="${user.userId}">
			<td>${user.firstName}</td>
			<td>${user.lastName}</td>
			<td>${user.userName}</td>
			<td>${user.email}</td>
			<td>${user.createdBy}</td>
			<td>${user.createdDate?string["dd.MM.yyyy"]}</td>
		</tr>
	</#list>
	</tbody>
</table>
<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">User Information</h4>
      </div>
      <div class="modal-body">
        <ul>
        	<li>Username:<b id="userName"></b></li>
        	<li>First Name:<b id="firstName"></b></li>
        	<li>Last Name:<b id="lastName"></b></li>
        	<li>Email:<b id="email"></b></li>
        	<li>Status:<b id="status"></b></li>
        </ul>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>
<script type="text/javascript">
	$("#userList").DataTable({
		"language": {
			"info": "Showing _START_ to _END_ of _TOTAL_ users"
		}
	});
	var jsonListUser = <#if jsonListUser??>${jsonListUser}<#else >''</#if>;
	var mapUser = {};
	for (var i = 0; i < jsonListUser.length; i++) {
		mapUser[jsonListUser[i].userId] = jsonListUser[i];
	}
	function setUserInfo(user) {
		$("#userName").html(user.userName);
		$("#firstName").html(user.firstName);
		$("#lastName").html(user.lastName);
		$("#email").html(user.email);
		if (user.status) {
			$("#status").html("Active");
		} else {
			$("#status").html("Inactive");
		}
	}
	function userInfo(userId) {
		console.log(mapUser[userId]);
		setUserInfo(mapUser[userId]);
		$("#myModal").modal("toggle");
	}
	$("#userList tbody tr").css("cursor", "pointer");
	$("#userList tbody tr").on("click", function(e) {
		userInfo($(this).attr("data-uid"));
	})
</script>
<#include "/common/footer.html">